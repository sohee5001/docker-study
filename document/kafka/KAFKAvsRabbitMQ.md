# KAFKA vs RabbitMQ



 | kafka | RabbitMQ | 
 |----| ----|
 | * 컨슈머가 메시지를 가져가도 브로커에 로그로 남아있음.<br> * 장애 발생으로 인해 메시지를 다시 가져오면 중복된 메시지를 가져옴. (EOP로 해당 부분 개선됨.) <br> * zookeeper와 제대로 연결이 되었는지, broker의 상태를 알기 위해서는 컨포넌트를 붙여야함. <br>| * Queue에서 가져간 메시지는 삭제되기에 남아있지 않음. <br> * 큐에서 메시지를 일정시간 대기시켰다가 보낼 수 있음. <br> * 큐의 상태를 체크 할 수 있음.
 
 
* kafka가 RabbitMQ보다 메시지의 순서보장은 확실하게 된다.    
* ex) 서비스 여러개 중 하나의 서비스가 죽음.   
      그 하나의 서비스를 살리기 전에 모든 서비스를 다 rollback 시켜줘야 한다. 어떻게 해야할까요?     
   -> KAFKA 로 하려면 장애 로그만 쌓는 토픽을 하나 두고 해당 서비스가 죽었을때 그 로그를 통해서 롤백 시킨다.     
   하지만 해당 방법은 해줘야 할 작업이 많고 복잡하다. 그래서 이런 상황에는 RabbitMQ를 사용하는 것이 더 적절하다.  

* 손실률이 없어야할 때는 RabbitMQ가 적절. 약간의 손실률이 생겨도 되는 것은 kafka도 적절.
       


  
